---
title: "assignment-4"
author: "Gage Clawson"
date: "11/13/2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(tidyverse)
library(vcdExtra)
```

```{r}
# read in the lobster traps dataset
lob_traps <- as.data.frame(read_csv("lobster_traps.csv"))


```

```{r}
# Read in the lobster size data set and make it tidy

lob_size <- read_csv("lobster_size_abundance.csv")
lob_size1 <- as.data.frame(lob_size)

lob_size2 <- expand.dft(lob_size1, freq = "COUNT") ##expand.dft filters out all count = 0 rows and makes data tidy (each observation has it's own row)
```
Yes boss

```{r}
lob_size3 <- mutate(lob_size2, DATE = as.Date(DATE, format = '%d-%b-%y')) # make date formats same for both datasets yyyy-mm-dd

five_sites <- c("AQUE", "CARP", "IVEE", "MOHK", "NAPL")

lob_traps1 <- mutate(lob_traps, DATE = as.Date(DATE, format = '%m/%d/%y')) %>%
  filter(SITE %in% five_sites)

# make date formats the same and filter for only the 5 sites 

```

1. Lobster abundance and fishing pressure (2012 - 2017)
Describe trends in lobster abundance (counts) and fishing pressure (trap buoys) at the five locations from
2012 - 2017. Ignore transect information - we are only interested in evaluating abundance and pressure on the
order of SITE. Note: you are not expected to use regression here - just think of ways to clearly
describe annual totals visually and in text, noting important trends, events and differences.

```{r}
# find the counts of lobsters per each site per each year
lob_counts <- lob_size3 %>%
  group_by(SITE, YEAR) %>%
  dplyr::summarise(count = length(SIZE)) %>%
  spread(YEAR, count) %>%
  ungroup(SITE) %>%
  select(-SITE)

rownames(lob_counts) <- c("AQUE", "CARP", "IVEE", "MOHK", "NAPL")

lob_counts_final <- lob_counts %>%
  select(-SITE)

# find the counts of traps per each site per each year
trap_counts <- lob_traps1 %>% 
  group_by(SITE, YEAR) %>%
  dplyr::summarise(count = length(TRAPS)) %>%
  spread(YEAR, count) %>%
  ungroup(SITE) %>%
  select(-SITE)

rownames(trap_counts) <- c("AQUE", "CARP", "IVEE", "MOHK", "NAPL")



```


